---
layout: layouts/base
---
<main id="main" class="post">
    <h1>{{ title | addNbsp | safe }}</h1>
    {% from "macros/macro.njk" import meta %}
      {{ meta({
        author: author,
        date: page.date,
        layout: layout,
        content: content,
        tags: tags
      }) }}
    {% include "partials/toc.html" %}
    {{ content | safe}}
</main>
<hr style="border-style: solid;">
<aside class="post-list">
  {# <details>
    <summary>Recent Articles</summary>
    {% set previousPost = collections.posts | getPreviousCollectionItem(page) %}
    {% set nextPost = collections.posts | getNextCollectionItem(page) %}
    
    {% if previousPost %}
      <article class="postlist-item">
        <h3>
          <a href="{{ previousPost.url }}" class="postlist-link">{% if previousPost.data.title %}{{ previousPost.data.title }}{% else %}<code>{{ previousPost.url }}</code>{% endif %}</a>
        </h3>
        {{ meta({
          author: author,
          date: page.date,
          tags: tags
        }) }}
      </article>
    {% endif %}
    {% if nextPost %}
      <hr>
      <article class="postlist-item{% if post.url == url %} postlist-item-active{% endif %}">
        <h3>
          <a href="{{ nextPost.url }}" class="postlist-link">{% if nextPost.data.title %}{{ nextPost.data.title }}{% else %}<code>{{ nextPost.url }}</code>{% endif %}</a>
        </h3>
        {{ meta({
          author: author,
          date: page.date,
          tags: tags
        }) }}
      </article>
    {% endif %}
  </details>
  <hr style="border-style: solid;"> #}
  <h2>More Posts</h2>

  {% set postslist = collections.posts | randomLimit(2, page.url) %}
  {% set headingLevel = 'h3' %}
  {% include "partials/postslist.njk" %}

  {# {% for post in collections.posts | randomLimit(2, page.url) %}
    <article class="postlist-item stack">
      <h3>
        <a href="{{ post.url }}" class="postlist-link">{{ post.data.title }}</a>
      </h3>
      {{ meta({
        author: post.data.author,
        date: post.date,
        tags: post.data.tags
      }) }}
      <p class="excerpt color:darkish">
        {% if post.data.excerpt %}
          {{ post.data.excerpt }}
        {% else %}
          {{ post.templateContent | excerpt }}</>
        {% endif %}
      </p>
    </article>
    <hr>
  {% endfor %} #}

</aside>